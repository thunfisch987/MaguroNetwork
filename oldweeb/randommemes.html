<html>
	<head>
		<title>Just A Random Meme</title>
		<script
			src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"
			integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
			crossorigin="anonymous"
		></script>
	</head>
	<body>
		<button onclick="randomImage()">New Image</button>
		<br />
		<img style="height: 500px" id="meme" alt="Here should be a meme" />
		<script>
			var fileNames = new Array();
			window.onload = (function () {
				getlist();
			})();
			$when(getlist()).then( randomImage() );

			function getlist() {
				$.ajax({
					url: "memes/",
					success: function (data) {
						$(data)
							.find("td > a")
							.each(function () {
								fileNames.push($(this).attr("href"));
							});
					},
				});
				fileNames.shift();
			}
			function randomImage() {
				file =
					"memes/" +
					fileNames[Math.floor(Math.random() * fileNames.length)];
				document.getElementById("meme").src = file;
			}
		</script>
	</body>
</html>
